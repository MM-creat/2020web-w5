<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width">

  <title>Silly story generator</title>

  <style>

  body {
    font-family: helvetica, sans-serif;
    width: 350px;
  }

  label {
    font-weight: bold;
  }

  div {
    padding-bottom: 20px;
  }

  input[type="text"] {
    padding: 5px;
    width: 150px;
  }

  p {
    background: #FFC125;
    color: #5E2612;
    padding: 10px;
    visibility: hidden;
  }

  </style>
</head>

<body>
  <div>
    <label for="customname">主人公の名前を入力:</label>
    <input id="customname" type="text" placeholder="">
  </div>
  <div>
    <label for="us">US</label><input id="us" type="radio" name="ukus" value="us" checked>
    <label for="ja">日本</label><input id="ja" type="radio" name="ukus" value="ja">
  </div>
  <div>
    <button class="randomize">バカ話を表示</button>
  </div>
  <!-- Thanks a lot to Willy Aguirre for his help with the code for this assessment -->
  <p class="story"></p>
  <script>
  const customName = document.getElementById('customname');
  const randomize = document.querySelector('.randomize');
  const story = document.querySelector('.story');

  function randomValueFromArray(array){
    const random = Math.floor(Math.random()*array.length);
    return array[random];
  }

  let storyText = '気温 摂氏-1度で外は寒かった。:insertx:は出かけた。:inserty:に着いた。:insertz:。:insertx:は所持金100円で驚いたが、りんごは驚かなかった。彼はいつもそうである。';
  let insertX = ['太郎','一郎','サンタクロース'];
  let insertY = ['スーパー','ゲームセンター','遊園地'];
  let insertZ = ['混雑していた','ガラガラだった','誰もいなかった'];

  randomize.addEventListener('click', result);

  function result() {
    let newStory = storyText;

    let xItem = randomValueFromArray(insertX);
    let yItem = randomValueFromArray(insertY);
    let zItem = randomValueFromArray(insertZ);

    newStory = newStory.replace(':insertx:',xItem);
    newStory = newStory.replace(':insertx:',xItem);
    newStory = newStory.replace(':inserty:',yItem);
    newStory = newStory.replace(':insertz:',zItem);

    if(customName.value !== '') {
      const name = customName.value;
      newStory = newStory.replace('りんご',name);
    }

    if(document.getElementById("ja").checked) {

      const cost = Math.round(300*0.0714286) + ' 円';
      const temperature =  '華氏' + Math.round((94-32) * 5 / 9) + '度';
      newStory = newStory.replace('摂氏-1度',temperature);
      newStory = newStory.replace('100円', cost);
    }

    story.textContent = newStory;
    story.style.visibility = 'visible';
  }

  </script>
</body>
</html>
